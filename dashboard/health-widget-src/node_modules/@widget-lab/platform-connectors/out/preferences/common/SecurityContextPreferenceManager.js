function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

import { SECURITY_CONTEXT_PREFERENCE_NAME, SECURITY_CONTEXT_PREFERENCE_LABEL } from "../../utils/constants";
export default class SecurityContextPreferenceManager {
  constructor() {// Nothing to do here, this pref is a list and needs to wait for security contexts

    _defineProperty(this, "setSecurityContextsListOptions", (listOptions = [], isVisible = false) => {
      this.securityContextsListOptions = listOptions; // Store available options to check while reading value

      let securityContextsListPreference = {
        name: SECURITY_CONTEXT_PREFERENCE_NAME,
        label: SECURITY_CONTEXT_PREFERENCE_LABEL,
        type: isVisible ? "list" : "hidden",
        options: listOptions
      };
      widget.addPreference(securityContextsListPreference);
    });

    _defineProperty(this, "readValue", () => {
      let securityContextPreference = widget.getValue(SECURITY_CONTEXT_PREFERENCE_NAME);

      if (!this.securityContextsListOptions.find(x => x.value === securityContextPreference)) {
        var _this$securityContext;

        securityContextPreference = (_this$securityContext = this.securityContextsListOptions[0]) === null || _this$securityContext === void 0 ? void 0 : _this$securityContext.value;
        widget.setValue(SECURITY_CONTEXT_PREFERENCE_NAME, securityContextPreference);
      }

      return widget.getValue(SECURITY_CONTEXT_PREFERENCE_NAME);
    });
  }

}