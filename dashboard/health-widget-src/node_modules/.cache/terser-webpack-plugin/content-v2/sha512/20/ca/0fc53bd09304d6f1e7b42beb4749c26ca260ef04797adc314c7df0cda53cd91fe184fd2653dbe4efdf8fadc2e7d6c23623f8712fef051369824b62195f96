{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{315:function(t,e,n){\"use strict\";n.r(e);var r=n(121),a=n(318),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"v-app\",[n(\"v-container\",{staticClass:\"pa-4\",attrs:{fluid:\"\"}},[n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\"}},[n(\"v-card\",{staticClass:\"mb-4\",attrs:{flat:\"\"}},[n(\"v-card-title\",{staticClass:\"text-h5\"},[n(\"v-icon\",{attrs:{left:\"\",large:\"\",color:\"primary\"}},[t._v(\"mdi-monitor-dashboard\")]),t._v(\"\\n            AI Assistant Health Dashboard\\n          \")],1),t._v(\" \"),n(\"v-card-subtitle\",[n(\"v-chip\",{staticClass:\"mr-2\",attrs:{small:\"\",color:t.connectionMode.isTrusted?\"success\":\"info\"}},[n(\"v-icon\",{attrs:{left:\"\",small:\"\"}},[t._v(t._s(t.connectionMode.isTrusted?\"mdi-shield-check\":\"mdi-server\"))]),t._v(\"\\n              \"+t._s(t.connectionMode.description)+\"\\n            \")],1),t._v(\" \"),n(\"v-chip\",{attrs:{small:\"\",outlined:\"\"}},[n(\"v-icon\",{attrs:{left:\"\",small:\"\"}},[t._v(\"mdi-clock-outline\")]),t._v(\"\\n              Auto-refresh: \"+t._s(t.refreshInterval)+\"s\\n            \")],1)],1)],1)],1)],1),t._v(\" \"),t.loading&&!t.healthData?n(\"v-row\",[n(\"v-col\",{staticClass:\"text-center\",attrs:{cols:\"12\"}},[n(\"v-progress-circular\",{attrs:{indeterminate:\"\",color:\"primary\",size:\"64\"}}),t._v(\" \"),n(\"p\",{staticClass:\"mt-4 text-h6\"},[t._v(\"Loading health data...\")])],1)],1):t.error?n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\"}},[n(\"v-alert\",{attrs:{type:\"error\",prominent:\"\"}},[n(\"v-row\",{attrs:{align:\"center\"}},[n(\"v-col\",{staticClass:\"grow\"},[n(\"div\",{staticClass:\"text-h6\"},[t._v(\"Failed to load health data\")]),t._v(\" \"),n(\"div\",[t._v(t._s(t.error))])]),t._v(\" \"),n(\"v-col\",{staticClass:\"shrink\"},[n(\"v-btn\",{attrs:{color:\"white\",outlined:\"\"},on:{click:t.refreshHealth}},[n(\"v-icon\",{attrs:{left:\"\"}},[t._v(\"mdi-refresh\")]),t._v(\"\\n                Retry\\n              \")],1)],1)],1)],1)],1)],1):t.healthData?n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\",md:\"4\"}},[n(\"status-card\",{attrs:{title:\"Overall Status\",status:t.healthData.overall,icon:\"mdi-heart-pulse\",timestamp:t.healthData.timestamp}})],1),t._v(\" \"),n(\"v-col\",{attrs:{cols:\"12\",md:\"4\"}},[n(\"status-card\",{attrs:{title:\"AIAI Service\",status:t.healthData.services&&t.healthData.services.aiai&&t.healthData.services.aiai.status||\"unknown\",icon:\"mdi-robot\",details:t.healthData.services&&t.healthData.services.aiai}})],1),t._v(\" \"),n(\"v-col\",{attrs:{cols:\"12\",md:\"4\"}},[n(\"status-card\",{attrs:{title:\"MCP Service\",status:t.healthData.services&&t.healthData.services.mcp&&t.healthData.services.mcp.status||\"unknown\",icon:\"mdi-api\",details:t.healthData.services&&t.healthData.services.mcp}})],1)],1):t._e(),t._v(\" \"),n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\"}},[n(\"assistant-query\")],1)],1),t._v(\" \"),t.healthData&&t.supervisionData?n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\"}},[n(\"service-info\",{attrs:{data:t.supervisionData}})],1)],1):t._e(),t._v(\" \"),n(\"v-row\",[n(\"v-col\",{staticClass:\"text-center\",attrs:{cols:\"12\"}},[n(\"v-btn\",{staticClass:\"mr-2\",attrs:{color:\"primary\",loading:t.loading},on:{click:t.refreshHealth}},[n(\"v-icon\",{attrs:{left:\"\"}},[t._v(\"mdi-refresh\")]),t._v(\"\\n          Refresh Now\\n        \")],1),t._v(\" \"),n(\"v-btn\",{attrs:{outlined:\"\"},on:{click:t.openSettings}},[n(\"v-icon\",{attrs:{left:\"\"}},[t._v(\"mdi-cog\")]),t._v(\"\\n          Settings\\n        \")],1)],1)],1)],1),t._v(\" \"),n(\"v-dialog\",{attrs:{\"max-width\":\"600px\"},model:{value:t.showSettings,callback:function(e){t.showSettings=e},expression:\"showSettings\"}},[n(\"v-card\",[n(\"v-card-title\",[n(\"v-icon\",{attrs:{left:\"\"}},[t._v(\"mdi-cog\")]),t._v(\"\\n        Widget Settings\\n      \")],1),t._v(\" \"),n(\"v-card-text\",[n(\"v-text-field\",{attrs:{label:\"AIAI API URL\",outlined:\"\",dense:\"\",hint:\"Base URL for AIAI service\",\"persistent-hint\":\"\"},model:{value:t.settingsForm.aiaiUrl,callback:function(e){t.$set(t.settingsForm,\"aiaiUrl\",e)},expression:\"settingsForm.aiaiUrl\"}}),t._v(\" \"),n(\"v-text-field\",{staticClass:\"mt-4\",attrs:{label:\"Auto-refresh Interval (seconds)\",outlined:\"\",dense:\"\",type:\"number\",min:\"10\",hint:\"How often to refresh health data\",\"persistent-hint\":\"\"},model:{value:t.settingsForm.refreshInterval,callback:function(e){t.$set(t.settingsForm,\"refreshInterval\",t._n(e))},expression:\"settingsForm.refreshInterval\"}})],1),t._v(\" \"),n(\"v-card-actions\",[n(\"v-spacer\"),t._v(\" \"),n(\"v-btn\",{attrs:{text:\"\"},on:{click:t.closeSettings}},[t._v(\"Cancel\")]),t._v(\" \"),n(\"v-btn\",{attrs:{color:\"primary\"},on:{click:t.saveSettings}},[t._v(\"Save\")])],1)],1)],1)],1)};o._withStripped=!0;var s=n(468);function i(t){return(i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){var e=function(t,e){if(\"object\"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||\"default\");if(\"object\"!=i(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==i(e)?e:e+\"\"}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n=\"function\"==typeof Symbol?Symbol:{},r=n.iterator||\"@@iterator\",a=n.toStringTag||\"@@toStringTag\";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,c=Object.create(l.prototype);return v(c,\"_invoke\",function(n,r,a){var o,i,l,c=0,u=a||[],d=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,i=0,l=t,v.n=n,s}};function p(n,r){for(i=n,l=r,e=0;!d&&c&&!a&&e<u.length;e++){var a,o=u[e],p=v.p,f=o[2];n>3?(a=f===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,v.v=r,v.n=o[1]):p<f&&(a=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,v.n=f,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,u,f){if(c>1)throw TypeError(\"Generator is already running\");for(d&&1===u&&p(u,f),i=u,l=f;(e=i<2?t:l)||!d;){o||(i?i<3?(i>1&&(v.n=-1),p(i,l)):v.n=l:v.v=l);try{if(c=2,o){if(i||(a=\"next\"),e=o[a]){if(!(e=e.call(o,l)))throw TypeError(\"iterator result is not an object\");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError(\"The iterator does not provide a '\"+a+\"' method\"),i=1);o=t}else if((e=(d=v.n<0)?l:n.call(r,v))!==s)break}catch(e){o=t,i=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,a,o),!0),c}var s={};function i(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(v(e={},r,(function(){return this})),e),p=c.prototype=i.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,v(t,a,\"GeneratorFunction\")),t.prototype=Object.create(p),t}return l.prototype=c,v(p,\"constructor\",c),v(c,\"constructor\",l),l.displayName=\"GeneratorFunction\",v(c,a,\"GeneratorFunction\"),v(p),v(p,a,\"Generator\"),v(p,r,(function(){return this})),v(p,\"toString\",(function(){return\"[object Generator]\"})),(d=function(){return{w:o,m:f}})()}function v(t,e,n,r){var a=Object.defineProperty;try{a({},\"\",{})}catch(t){a=0}(v=function(t,e,n,r){function o(e,n){v(t,e,(function(t){return this._invoke(e,n,t)}))}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o(\"next\",0),o(\"throw\",1),o(\"return\",2))})(t,e,n,r)}function p(t,e,n,r,a,o,s){try{var i=t[o](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(r,a)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){p(o,r,a,s,i,\"next\",t)}function i(t){p(o,r,a,s,i,\"throw\",t)}s(void 0)}))}}function m(){try{return!(\"undefined\"==typeof window||!window.widget)&&(\"function\"==typeof s.a&&(!!window.widget.uwaUrl&&(console.log(\"[ApiService] Running in trusted mode (3DDashboard)\"),!0)))}catch(t){return console.log(\"[ApiService] Not in trusted mode:\",t.message),!1}}function h(t){return b.apply(this,arguments)}function b(){return(b=f(d().m((function t(e){var n,r,a,o,i,l=arguments;return d().w((function(t){for(;;)switch(t.p=t.n){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},r=l.length>2&&void 0!==l[2]?l[2]:null,a=l.length>3&&void 0!==l[3]?l[3]:null,!m()){t.n=6;break}return t.p=1,console.log(\"[ApiService] Direct call to: \".concat(e)),t.n=2,Object(s.a)(e,{method:n.method||\"GET\",headers:n.headers||{},body:n.body,timeout:n.timeout||3e4});case 2:return o=t.v,console.log(\"[ApiService] Direct call succeeded\"),t.a(2,o);case 3:if(t.p=3,i=t.v,console.warn(\"[ApiService] Direct call failed: \".concat(i.message)),!r||!a){t.n=5;break}return console.log(\"[ApiService] Falling back to backend proxy\"),t.n=4,g(r,a,n);case 4:return t.a(2,t.v);case 5:throw i;case 6:if(r&&a){t.n=7;break}throw new Error(\"Backend proxy not configured for standalone mode. Please start the backend server.\");case 7:return console.log(\"[ApiService] Using backend proxy: \".concat(r).concat(a)),t.n=8,g(r,a,n);case 8:return t.a(2,t.v)}}),t,null,[[1,3]])})))).apply(this,arguments)}function g(t,e){return y.apply(this,arguments)}function y(){return(y=f(d().m((function t(e,n){var r,a,o,s,i,l,u,v=arguments;return d().w((function(t){for(;;)switch(t.p=t.n){case 0:return r=v.length>2&&void 0!==v[2]?v[2]:{},a=\"\".concat(e).concat(n),o=new AbortController,s=setTimeout((function(){return o.abort()}),r.timeout||3e4),t.p=1,t.n=2,fetch(a,{method:r.method||\"GET\",headers:c({\"Content-Type\":\"application/json\"},r.headers),body:r.body?JSON.stringify(r.body):void 0,signal:o.signal});case 2:if(i=t.v,clearTimeout(s),i.ok){t.n=4;break}return t.n=3,i.text();case 3:throw l=t.v,new Error(\"HTTP \".concat(i.status,\": \").concat(l));case 4:return t.n=5,i.json();case 5:return t.a(2,t.v);case 6:if(t.p=6,u=t.v,clearTimeout(s),\"AbortError\"!==u.name){t.n=7;break}throw new Error(\"Request timeout\");case 7:throw u;case 8:return t.a(2)}}),t,null,[[1,6]])})))).apply(this,arguments)}var _=function(t,e){var n=arguments;return f(d().m((function r(){var a,o,s,i;return d().w((function(r){for(;;)switch(r.n){case 0:return a=n.length>2&&void 0!==n[2]?n[2]:\"\",o=\"\".concat(t,\"/api/v1/assistants\"),s={method:\"GET\"},i=\"/api/aiai/assistants?aiai_url=\".concat(encodeURIComponent(t)).concat(a?\"&assistant_namespace=\".concat(a):\"\"),r.n=1,h(o,s,e,i);case 1:return r.a(2,r.v)}}),r)})))()},w=function(t,e,n,r){var a=arguments;return f(d().m((function o(){var s,i,l,c;return d().w((function(o){for(;;)switch(o.n){case 0:return s=a.length>4&&void 0!==a[4]?a[4]:\"\",i=\"\".concat(t,\"/api/v1/assistants/\").concat(n,\"/submit\"),l={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(r),timeout:6e4},c=\"/api/aiai/assistants/\".concat(n,\"/submit?aiai_url=\").concat(encodeURIComponent(t)).concat(s?\"&assistant_namespace=\".concat(s):\"\"),o.n=1,h(i,l,e,c);case 1:return o.a(2,o.v)}}),o)})))()},x=function(t){return f(d().m((function e(){return d().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,g(t,\"/api/health/all\",{method:\"GET\"});case 1:return e.a(2,e.v)}}),e)})))()};var S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"v-card\",{staticClass:\"status-card\",attrs:{color:t.statusColor,dark:\"\"}},[n(\"v-card-title\",{staticClass:\"pb-2\"},[n(\"v-icon\",{attrs:{left:\"\",large:\"\"}},[t._v(t._s(t.icon))]),t._v(\" \"),n(\"span\",{staticClass:\"text-h6\"},[t._v(t._s(t.title))])],1),t._v(\" \"),n(\"v-card-text\",{staticClass:\"pt-2\"},[n(\"div\",{staticClass:\"text-h4 font-weight-bold mb-2\"},[t._v(\"\\n      \"+t._s(t.statusText)+\"\\n    \")]),t._v(\" \"),t.timestamp?n(\"div\",{staticClass:\"text-caption opacity-80\"},[n(\"v-icon\",{attrs:{small:\"\"}},[t._v(\"mdi-clock-outline\")]),t._v(\"\\n      \"+t._s(t.formattedTimestamp)+\"\\n    \")],1):t._e(),t._v(\" \"),t.details?n(\"div\",{staticClass:\"mt-3\"},[n(\"v-divider\",{staticClass:\"my-2 opacity-50\"}),t._v(\" \"),t._l(t.detailsFiltered,(function(e,r){return n(\"div\",{key:r,staticClass:\"text-caption\"},[n(\"strong\",[t._v(t._s(t.formatKey(r))+\":\")]),t._v(\" \"+t._s(t.formatValue(e))+\"\\n      \")])}))],2):t._e()])],1)};function C(t){return(C=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t,e,n){return(e=function(t){var e=function(t,e){if(\"object\"!=C(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||\"default\");if(\"object\"!=C(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==C(e)?e:e+\"\"}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}S._withStripped=!0;var A={name:\"StatusCard\",props:{title:{type:String,required:!0},status:{type:String,default:\"unknown\"},icon:{type:String,default:\"mdi-information\"},timestamp:{type:String,default:null},details:{type:Object,default:null}},computed:{statusText:function(){return this.status.toUpperCase()},statusColor:function(){var t=this.status.toLowerCase();return\"healthy\"===t||\"ok\"===t?\"success\":\"degraded\"===t||\"warning\"===t?\"warning\":\"unhealthy\"===t||\"error\"===t?\"error\":\"grey\"},formattedTimestamp:function(){if(!this.timestamp)return\"\";try{return new Date(this.timestamp).toLocaleString()}catch(t){return this.timestamp}},detailsFiltered:function(){if(!this.details)return null;var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.details);return delete t.status,Object.keys(t).length>0?t:null}},methods:{formatKey:function(t){return t.replace(/_/g,\" \").replace(/\\b\\w/g,(function(t){return t.toUpperCase()}))},formatValue:function(t){return\"boolean\"==typeof t?t?\"Yes\":\"No\":null==t?\"N/A\":\"object\"===C(t)?JSON.stringify(t):String(t)}}},j=n(332),T=n.n(j),D=n(381),P=n.n(D),I={insert:\"head\",singleton:!1},V=(T()(P.a,I),P.a.locals,n(333)),E=n(334),U=n.n(E),N=n(355),R=n(324),F=n(360),M=n(361),H=Object(V.a)(A,S,[],!1,null,\"3670a15c\",null);U()(H,{VCard:N.a,VCardText:R.c,VCardTitle:R.d,VDivider:F.a,VIcon:M.a}),H.options.__file=\"src/components/StatusCard.vue\";var G=H.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"v-card\",[n(\"v-card-title\",[n(\"v-icon\",{attrs:{left:\"\"}},[t._v(\"mdi-information-outline\")]),t._v(\"\\n    Service Information\\n  \")],1),t._v(\" \"),n(\"v-card-text\",[t.data?n(\"v-simple-table\",{attrs:{dense:\"\"},scopedSlots:t._u([{key:\"default\",fn:function(){return[n(\"tbody\",t._l(t.displayData,(function(e,r){return n(\"tr\",{key:r},[n(\"td\",{staticClass:\"font-weight-bold text-no-wrap\"},[t._v(t._s(t.formatKey(r)))]),t._v(\" \"),n(\"td\",[t._v(t._s(t.formatValue(e)))])])})),0)]},proxy:!0}],null,!1,1944005260)}):n(\"div\",{staticClass:\"text-center py-4 grey--text\"},[t._v(\"\\n      No service information available\\n    \")])],1)],1)};function Q(t){return(Q=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}q._withStripped=!0;var J={name:\"ServiceInfo\",props:{data:{type:Object,default:null}},computed:{displayData:function(){var t=this;if(!this.data)return null;var e={};return Object.keys(this.data).forEach((function(n){var r=t.data[n];\"object\"===Q(r)&&null!==r||(e[n]=r)})),e}},methods:{formatKey:function(t){return t.replace(/_/g,\" \").replace(/\\b\\w/g,(function(t){return t.toUpperCase()}))},formatValue:function(t){return\"boolean\"==typeof t?t?\"Yes\":\"No\":null==t?\"N/A\":String(t)}}},L=n(399),z=n.n(L),$={insert:\"head\",singleton:!1},B=(T()(z.a,$),z.a.locals,n(479)),K=Object(V.a)(J,q,[],!1,null,\"46354183\",null);U()(K,{VCard:N.a,VCardText:R.c,VCardTitle:R.d,VIcon:M.a,VSimpleTable:B.a}),K.options.__file=\"src/components/ServiceInfo.vue\";var Y=K.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"v-card\",[n(\"v-card-title\",[n(\"v-icon\",{attrs:{left:\"\",color:\"primary\"}},[t._v(\"mdi-robot-outline\")]),t._v(\"\\n    Query AI Assistant\\n  \")],1),t._v(\" \"),n(\"v-card-text\",[n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\",md:\"6\"}},[n(\"v-select\",{attrs:{items:t.assistants,label:\"Assistant\",outlined:\"\",dense:\"\",\"prepend-inner-icon\":\"mdi-robot\",loading:t.loadingAssistants,disabled:t.loading||t.loadingAssistants,hint:\"Select AI assistant to query\",\"persistent-hint\":\"\"},model:{value:t.selectedAssistant,callback:function(e){t.selectedAssistant=e},expression:\"selectedAssistant\"}})],1),t._v(\" \"),n(\"v-col\",{attrs:{cols:\"12\",md:\"6\"}},[n(\"v-text-field\",{attrs:{label:\"Conversation ID (optional)\",outlined:\"\",dense:\"\",\"prepend-inner-icon\":\"mdi-message-text-outline\",disabled:t.loading,placeholder:\"Leave empty for new conversation\"},model:{value:t.conversationId,callback:function(e){t.conversationId=e},expression:\"conversationId\"}})],1)],1),t._v(\" \"),n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\"}},[n(\"v-textarea\",{attrs:{label:\"Prompt\",outlined:\"\",rows:\"4\",placeholder:\"Enter your prompt here... (e.g., 'create a product structure for a toy car')\",disabled:t.loading,counter:\"\"},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:\"prompt\"}})],1)],1),t._v(\" \"),n(\"v-expansion-panels\",{attrs:{flat:\"\"}},[n(\"v-expansion-panel\",[n(\"v-expansion-panel-header\",[n(\"span\",[n(\"v-icon\",{attrs:{left:\"\",small:\"\"}},[t._v(\"mdi-tune\")]),t._v(\"\\n            Advanced Options\\n          \")],1)]),t._v(\" \"),n(\"v-expansion-panel-content\",[n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\",md:\"6\"}},[n(\"v-select\",{attrs:{items:t.availableModels,label:\"LLM Model\",outlined:\"\",dense:\"\",disabled:t.loading},model:{value:t.model,callback:function(e){t.model=e},expression:\"model\"}})],1),t._v(\" \"),n(\"v-col\",{attrs:{cols:\"12\",md:\"6\"}},[n(\"v-select\",{attrs:{items:t.languages,label:\"Prompt Language\",outlined:\"\",dense:\"\",disabled:t.loading},model:{value:t.language,callback:function(e){t.language=e},expression:\"language\"}})],1)],1),t._v(\" \"),n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\",md:\"4\"}},[n(\"v-switch\",{attrs:{label:\"Enable Streaming\",disabled:t.loading,dense:\"\"},model:{value:t.streamEnabled,callback:function(e){t.streamEnabled=e},expression:\"streamEnabled\"}})],1),t._v(\" \"),n(\"v-col\",{attrs:{cols:\"12\",md:\"4\"}},[n(\"v-switch\",{attrs:{label:\"Mock Mode\",disabled:t.loading,dense:\"\",hint:\"Use mock data for testing\",\"persistent-hint\":\"\"},model:{value:t.mockMode,callback:function(e){t.mockMode=e},expression:\"mockMode\"}})],1),t._v(\" \"),n(\"v-col\",{attrs:{cols:\"12\",md:\"4\"}},[n(\"v-switch\",{attrs:{label:\"NoCode Companion\",disabled:t.loading,dense:\"\"},model:{value:t.isNoCodeCompanion,callback:function(e){t.isNoCodeCompanion=e},expression:\"isNoCodeCompanion\"}})],1)],1),t._v(\" \"),n(\"v-row\",[n(\"v-col\",{attrs:{cols:\"12\"}},[n(\"v-textarea\",{attrs:{label:\"Context (JSON)\",outlined:\"\",rows:\"3\",placeholder:'{\"message\": {\"selected_dimensions\": {...}}}',disabled:t.loading,dense:\"\"},model:{value:t.contextJson,callback:function(e){t.contextJson=e},expression:\"contextJson\"}})],1)],1)],1)],1)],1),t._v(\" \"),n(\"v-row\",{staticClass:\"mt-4\"},[n(\"v-col\",{staticClass:\"d-flex gap-2\",attrs:{cols:\"12\"}},[n(\"v-btn\",{attrs:{color:\"primary\",loading:t.loading,disabled:!t.prompt||!t.selectedAssistant},on:{click:t.submitQuery}},[n(\"v-icon\",{attrs:{left:\"\"}},[t._v(\"mdi-send\")]),t._v(\"\\n          Submit Query\\n        \")],1),t._v(\" \"),n(\"v-btn\",{attrs:{outlined:\"\",disabled:t.loading},on:{click:t.clearForm}},[n(\"v-icon\",{attrs:{left:\"\"}},[t._v(\"mdi-close\")]),t._v(\"\\n          Clear\\n        \")],1),t._v(\" \"),n(\"v-spacer\"),t._v(\" \"),n(\"v-btn\",{attrs:{text:\"\",small:\"\",disabled:!t.response},on:{click:t.copyResponse}},[n(\"v-icon\",{attrs:{left:\"\",small:\"\"}},[t._v(\"mdi-content-copy\")]),t._v(\"\\n          Copy Response\\n        \")],1)],1)],1),t._v(\" \"),n(\"v-divider\",{staticClass:\"my-4\"}),t._v(\" \"),t.loading?n(\"div\",{staticClass:\"text-center py-8\"},[n(\"v-progress-circular\",{attrs:{indeterminate:\"\",color:\"primary\",size:\"48\"}}),t._v(\" \"),n(\"p\",{staticClass:\"mt-4 text-subtitle-1\"},[t._v(\"Processing your request...\")])],1):t.error?n(\"div\",{staticClass:\"mt-4\"},[n(\"v-alert\",{attrs:{type:\"error\",outlined:\"\"}},[n(\"div\",{staticClass:\"text-h6\"},[t._v(\"Error\")]),t._v(\" \"),n(\"div\",[t._v(t._s(t.error))])])],1):t.response?n(\"div\",{staticClass:\"mt-4\"},[n(\"v-card\",{staticClass:\"mb-4\",attrs:{outlined:\"\"}},[n(\"v-card-subtitle\",{staticClass:\"pb-0\"},[n(\"v-icon\",{attrs:{left:\"\",small:\"\",color:\"info\"}},[t._v(\"mdi-information\")]),t._v(\"\\n          Summary\\n        \")],1),t._v(\" \"),n(\"v-card-text\",[n(\"div\",{staticClass:\"text-body-1\"},[t._v(t._s(t.response.summary))])])],1),t._v(\" \"),n(\"v-card\",{attrs:{outlined:\"\"}},[n(\"v-card-subtitle\",{staticClass:\"pb-0 d-flex align-center\"},[n(\"v-icon\",{attrs:{left:\"\",small:\"\",color:\"success\"}},[t._v(\"mdi-file-tree\")]),t._v(\"\\n          Structure\\n          \"),n(\"v-spacer\"),t._v(\" \"),n(\"v-btn-toggle\",{attrs:{dense:\"\",mandatory:\"\"},model:{value:t.viewMode,callback:function(e){t.viewMode=e},expression:\"viewMode\"}},[n(\"v-btn\",{attrs:{small:\"\",value:\"tree\"}},[n(\"v-icon\",{attrs:{small:\"\"}},[t._v(\"mdi-file-tree\")]),t._v(\"\\n              Tree\\n            \")],1),t._v(\" \"),n(\"v-btn\",{attrs:{small:\"\",value:\"json\"}},[n(\"v-icon\",{attrs:{small:\"\"}},[t._v(\"mdi-code-json\")]),t._v(\"\\n              JSON\\n            \")],1)],1)],1),t._v(\" \"),n(\"v-card-text\",[\"tree\"===t.viewMode?n(\"div\",{staticClass:\"structure-tree\"},[n(\"tree-node\",{attrs:{node:t.response.structure,level:0}})],1):n(\"pre\",{staticClass:\"json-view\"},[t._v(t._s(JSON.stringify(t.response.structure,null,2)))])])],1),t._v(\" \"),n(\"v-card\",{staticClass:\"mt-4\",attrs:{outlined:\"\"}},[n(\"v-card-subtitle\",{staticClass:\"pb-0\"},[n(\"v-icon\",{attrs:{left:\"\",small:\"\"}},[t._v(\"mdi-chart-box-outline\")]),t._v(\"\\n          Response Metadata\\n        \")],1),t._v(\" \"),n(\"v-card-text\",[n(\"v-simple-table\",{attrs:{dense:\"\"},scopedSlots:t._u([{key:\"default\",fn:function(){return[n(\"tbody\",[n(\"tr\",[n(\"td\",{staticClass:\"font-weight-bold\"},[t._v(\"Model\")]),t._v(\" \"),n(\"td\",[t._v(t._s(t.response.metadata.model||\"N/A\"))])]),t._v(\" \"),n(\"tr\",[n(\"td\",{staticClass:\"font-weight-bold\"},[t._v(\"Tokens (Total)\")]),t._v(\" \"),n(\"td\",[t._v(t._s(t.response.metadata.totalTokens||\"N/A\"))])]),t._v(\" \"),n(\"tr\",[n(\"td\",{staticClass:\"font-weight-bold\"},[t._v(\"Finish Reason\")]),t._v(\" \"),n(\"td\",[t._v(t._s(t.response.metadata.finishReason||\"N/A\"))])]),t._v(\" \"),n(\"tr\",[n(\"td\",{staticClass:\"font-weight-bold\"},[t._v(\"Timestamp\")]),t._v(\" \"),n(\"td\",[t._v(t._s(t.formatTimestamp(t.response.metadata.timestamp)))])])])]},proxy:!0}])})],1)],1)],1):n(\"div\",{staticClass:\"text-center py-8 grey--text\"},[n(\"v-icon\",{attrs:{size:\"64\",color:\"grey lighten-1\"}},[t._v(\"mdi-robot-outline\")]),t._v(\" \"),n(\"p\",{staticClass:\"mt-4 text-subtitle-1\"},[t._v(\"Submit a query to see results\")])],1)],1)],1)};function X(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n=\"function\"==typeof Symbol?Symbol:{},r=n.iterator||\"@@iterator\",a=n.toStringTag||\"@@toStringTag\";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,c=Object.create(l.prototype);return Z(c,\"_invoke\",function(n,r,a){var o,i,l,c=0,u=a||[],d=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,i=0,l=t,v.n=n,s}};function p(n,r){for(i=n,l=r,e=0;!d&&c&&!a&&e<u.length;e++){var a,o=u[e],p=v.p,f=o[2];n>3?(a=f===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,v.v=r,v.n=o[1]):p<f&&(a=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,v.n=f,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,u,f){if(c>1)throw TypeError(\"Generator is already running\");for(d&&1===u&&p(u,f),i=u,l=f;(e=i<2?t:l)||!d;){o||(i?i<3?(i>1&&(v.n=-1),p(i,l)):v.n=l:v.v=l);try{if(c=2,o){if(i||(a=\"next\"),e=o[a]){if(!(e=e.call(o,l)))throw TypeError(\"iterator result is not an object\");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError(\"The iterator does not provide a '\"+a+\"' method\"),i=1);o=t}else if((e=(d=v.n<0)?l:n.call(r,v))!==s)break}catch(e){o=t,i=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,a,o),!0),c}var s={};function i(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Z(e={},r,(function(){return this})),e),d=c.prototype=i.prototype=Object.create(u);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Z(t,a,\"GeneratorFunction\")),t.prototype=Object.create(d),t}return l.prototype=c,Z(d,\"constructor\",c),Z(c,\"constructor\",l),l.displayName=\"GeneratorFunction\",Z(c,a,\"GeneratorFunction\"),Z(d),Z(d,a,\"Generator\"),Z(d,r,(function(){return this})),Z(d,\"toString\",(function(){return\"[object Generator]\"})),(X=function(){return{w:o,m:v}})()}function Z(t,e,n,r){var a=Object.defineProperty;try{a({},\"\",{})}catch(t){a=0}(Z=function(t,e,n,r){function o(e,n){Z(t,e,(function(t){return this._invoke(e,n,t)}))}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o(\"next\",0),o(\"throw\",1),o(\"return\",2))})(t,e,n,r)}function tt(t,e,n,r,a,o,s){try{var i=t[o](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(r,a)}function et(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){tt(o,r,a,s,i,\"next\",t)}function i(t){tt(o,r,a,s,i,\"throw\",t)}s(void 0)}))}}W._withStripped=!0;var nt={name:\"AssistantQuery\",components:{TreeNode:{name:\"TreeNode\",props:{node:{type:Object,required:!0},level:{type:Number,default:0}},template:'\\n    <div :style=\"{ marginLeft: (level * 20) + \\'px\\' }\" class=\"tree-node\">\\n      <div class=\"node-header\">\\n        <span :class=\"[\\'node-icon\\', hasChildren ? \\'folder\\' : \\'file\\']\">\\n          {{ hasChildren ? \\'üìÅ\\' : \\'üìÑ\\' }}\\n        </span>\\n        <span class=\"node-name\">{{ node.name }}</span>\\n        <span v-if=\"node.quantity\" class=\"node-quantity\">\\n          Qty: {{ node.quantity }}\\n        </span>\\n      </div>\\n      <div v-if=\"hasChildren\" class=\"node-children\">\\n        <tree-node\\n          v-for=\"(child, index) in node.components\"\\n          :key=\"index\"\\n          :node=\"child\"\\n          :level=\"level + 1\"\\n        />\\n      </div>\\n    </div>\\n  ',computed:{hasChildren:function(){return this.node.components&&this.node.components.length>0}}}},data:function(){return{selectedAssistant:\"\",prompt:\"\",conversationId:\"\",model:\"mistralai/mistral-small-2506\",language:\"en\",streamEnabled:!1,mockMode:!1,isNoCodeCompanion:!1,contextJson:\"\",loading:!1,loadingAssistants:!1,error:null,response:null,viewMode:\"tree\",aiaiUrl:\"https://devopsyivwvbl820289-euw1-devprol50-aiai.3dx-staging.3ds.com\",backendUrl:\"http://localhost:8080\",assistants:[],availableModels:[\"mistralai/mistral-small-2506\",\"mistralai/mistral-large-2411\",\"anthropic/claude-3-5-sonnet-20241022\",\"openai/gpt-4o-2024-11-20\"],languages:[{text:\"English\",value:\"en\"},{text:\"French\",value:\"fr\"},{text:\"German\",value:\"de\"},{text:\"Spanish\",value:\"es\"}]}},mounted:function(){if(console.log(\"[AssistantQuery] Component mounted\"),\"undefined\"!=typeof widget&&widget.getValue)try{this.aiaiUrl=widget.getValue(\"aiaiUrl\")||this.aiaiUrl,console.log(\"[AssistantQuery] Loaded aiaiUrl from preferences:\",this.aiaiUrl)}catch(t){console.warn(\"[AssistantQuery] Could not load widget preferences:\",t)}this.fetchAssistants()},methods:{fetchAssistants:function(){var t=this;return et(X().m((function e(){var n,r,a;return X().w((function(e){for(;;)switch(e.p=e.n){case 0:return t.loadingAssistants=!0,e.p=1,console.log(\"[AssistantQuery] Fetching assistants from:\",t.aiaiUrl),e.n=2,_(t.aiaiUrl,t.backendUrl);case 2:n=e.v,t.assistants=n.map((function(t){return{text:t.title||t.name||t.id,value:t.name||t.id}})),t.assistants.length>0&&(r=t.assistants.find((function(t){return\"asmstruct\"===t.value})),t.selectedAssistant=r?r.value:t.assistants[0].value),console.log(\"[AssistantQuery] Loaded assistants:\",t.assistants),e.n=4;break;case 3:e.p=3,a=e.v,console.error(\"[AssistantQuery] Failed to load assistants:\",a),t.assistants=[{text:\"Assembly Structure (asmstruct)\",value:\"asmstruct\"}],t.selectedAssistant=\"asmstruct\";case 4:return e.p=4,t.loadingAssistants=!1,e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})))()},submitQuery:function(){var t=this;return et(X().m((function e(){var n,r,a,o;return X().w((function(e){for(;;)switch(e.p=e.n){case 0:if(console.log(\"[AssistantQuery] Submitting query to:\",t.selectedAssistant),t.loading=!0,t.error=null,t.response=null,e.p=1,!t.mockMode){e.n=3;break}return console.log(\"[AssistantQuery] Using mock mode\"),e.n=2,new Promise((function(t){return setTimeout(t,1500)}));case 2:return t.response=t.parseMockResponse(),e.a(2);case 3:if(n={prompt:t.prompt,\"llm.stream\":t.streamEnabled,\"llm.model\":t.model,prompt_language:t.language,mock:t.mockMode},t.conversationId&&(n.conversation_id=t.conversationId),!t.contextJson){e.n=6;break}e.p=4,n.context=JSON.parse(t.contextJson),e.n=6;break;case 5:throw e.p=5,a=e.v,new Error(\"Invalid context JSON: \".concat(a.message));case 6:return console.log(\"[AssistantQuery] Request body:\",n),e.n=7,w(t.aiaiUrl,t.backendUrl,t.selectedAssistant,n,\"\");case 7:r=e.v,console.log(\"[AssistantQuery] API response:\",r),t.response=t.parseResponse(r),console.log(\"[AssistantQuery] Parsed response:\",t.response),e.n=9;break;case 8:e.p=8,o=e.v,console.error(\"[AssistantQuery] Error submitting query:\",o),t.error=o.message||\"Failed to submit query\";case 9:return e.p=9,t.loading=!1,e.f(9);case 10:return e.a(2)}}),e,null,[[4,5],[1,8,9,10]])})))()},parseResponse:function(t){try{var e,n,r,a,o,s,i,l,c,u,d,v=null===(e=t.llm)||void 0===e||null===(n=e.choices)||void 0===n||null===(r=n[0])||void 0===r||null===(a=r.message)||void 0===a?void 0:a.content;if(!v)throw new Error(\"No content in API response\");var p=v.indexOf(\"{\");if(-1===p)throw new Error(\"No JSON found in response\");var f=v.substring(p),m=JSON.parse(f);return{summary:m.summary||\"No summary provided\",structure:m.structure||{},metadata:{model:(null===(o=t.llm)||void 0===o?void 0:o.model)||\"N/A\",totalTokens:(null===(s=t.llm)||void 0===s||null===(i=s.usage)||void 0===i?void 0:i.total_tokens)||0,finishReason:(null===(l=t.llm)||void 0===l||null===(c=l.choices)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.finish_reason)||\"N/A\",timestamp:(null===(d=t.llm)||void 0===d?void 0:d.created)||Math.floor(Date.now()/1e3)}}}catch(t){throw console.error(\"[AssistantQuery] Failed to parse response:\",t),new Error(\"Failed to parse response: \".concat(t.message))}},parseMockResponse:function(){var t={llm:{id:\"2659f08b-3e8c-42c3-b21f-dae95a33264f\",object:\"chat.completion\",created:Math.floor(Date.now()/1e3),model:this.model,choices:[{message:{content:'[asmstruct] {\\n  \"summary\": \"Here is the product structure for a toy car\",\\n  \"structure\": {\\n    \"name\": \"Toy Car\",\\n    \"components\": [\\n      {\\n        \"name\": \"chassis\",\\n        \"quantity\": 1,\\n        \"components\": [\\n          {\\n            \"name\": \"body\",\\n            \"quantity\": 1\\n          },\\n          {\\n            \"name\": \"wheels\",\\n            \"quantity\": 4\\n          }\\n        ]\\n      },\\n      {\\n        \"name\": \"engine\",\\n        \"quantity\": 1\\n      },\\n      {\\n        \"name\": \"battery\",\\n        \"quantity\": 1\\n      },\\n      {\\n        \"name\": \"remote control\",\\n        \"quantity\": 1\\n      }\\n    ]\\n  }\\n}',role:\"assistant\"},index:0,logprobs:-1,finish_reason:\"stop\"}],usage:{prompt_tokens:120,completion_tokens:85,total_tokens:205}}},e=t.llm.choices[0].message.content,n=e.indexOf(\"{\"),r=e.substring(n),a=JSON.parse(r);return{summary:a.summary,structure:a.structure,metadata:{model:t.llm.model,totalTokens:t.llm.usage.total_tokens,finishReason:t.llm.choices[0].finish_reason,timestamp:t.llm.created}}},clearForm:function(){this.prompt=\"\",this.conversationId=\"\",this.contextJson=\"\",this.error=null,this.response=null},copyResponse:function(){if(this.response){var t=JSON.stringify(this.response.structure,null,2);navigator.clipboard.writeText(t).then((function(){console.log(\"[AssistantQuery] Response copied to clipboard\")}))}},formatTimestamp:function(t){return t?new Date(1e3*t).toLocaleString():\"N/A\"}}},rt=n(402),at=n.n(rt),ot={insert:\"head\",singleton:!1},st=(T()(at.a,ot),at.a.locals,n(493)),it=n(362),lt=n(495),ct=n(480),ut=n(481),dt=n(482),vt=n(483),pt=n(484),ft=n(346),mt=n(485),ht=n(490),bt=n(487),gt=n(492),yt=n(374),_t=n(488),wt=Object(V.a)(nt,W,[],!1,null,\"7db409ba\",null);function xt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n=\"function\"==typeof Symbol?Symbol:{},r=n.iterator||\"@@iterator\",a=n.toStringTag||\"@@toStringTag\";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,c=Object.create(l.prototype);return St(c,\"_invoke\",function(n,r,a){var o,i,l,c=0,u=a||[],d=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,i=0,l=t,v.n=n,s}};function p(n,r){for(i=n,l=r,e=0;!d&&c&&!a&&e<u.length;e++){var a,o=u[e],p=v.p,f=o[2];n>3?(a=f===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,v.v=r,v.n=o[1]):p<f&&(a=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,v.n=f,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,u,f){if(c>1)throw TypeError(\"Generator is already running\");for(d&&1===u&&p(u,f),i=u,l=f;(e=i<2?t:l)||!d;){o||(i?i<3?(i>1&&(v.n=-1),p(i,l)):v.n=l:v.v=l);try{if(c=2,o){if(i||(a=\"next\"),e=o[a]){if(!(e=e.call(o,l)))throw TypeError(\"iterator result is not an object\");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError(\"The iterator does not provide a '\"+a+\"' method\"),i=1);o=t}else if((e=(d=v.n<0)?l:n.call(r,v))!==s)break}catch(e){o=t,i=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,a,o),!0),c}var s={};function i(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(St(e={},r,(function(){return this})),e),d=c.prototype=i.prototype=Object.create(u);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,St(t,a,\"GeneratorFunction\")),t.prototype=Object.create(d),t}return l.prototype=c,St(d,\"constructor\",c),St(c,\"constructor\",l),l.displayName=\"GeneratorFunction\",St(c,a,\"GeneratorFunction\"),St(d),St(d,a,\"Generator\"),St(d,r,(function(){return this})),St(d,\"toString\",(function(){return\"[object Generator]\"})),(xt=function(){return{w:o,m:v}})()}function St(t,e,n,r){var a=Object.defineProperty;try{a({},\"\",{})}catch(t){a=0}(St=function(t,e,n,r){function o(e,n){St(t,e,(function(t){return this._invoke(e,n,t)}))}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o(\"next\",0),o(\"throw\",1),o(\"return\",2))})(t,e,n,r)}function Ct(t,e,n,r,a,o,s){try{var i=t[o](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(r,a)}U()(wt,{VAlert:st.a,VBtn:it.a,VBtnToggle:lt.a,VCard:N.a,VCardSubtitle:R.b,VCardText:R.c,VCardTitle:R.d,VCol:ct.a,VDivider:F.a,VExpansionPanel:ut.a,VExpansionPanelContent:dt.a,VExpansionPanelHeader:vt.a,VExpansionPanels:pt.a,VIcon:M.a,VProgressCircular:ft.a,VRow:mt.a,VSelect:ht.a,VSimpleTable:B.a,VSpacer:bt.a,VSwitch:gt.a,VTextField:yt.a,VTextarea:_t.a}),wt.options.__file=\"src/components/AssistantQuery.vue\";var kt={name:\"HealthDashboard\",components:{StatusCard:G,ServiceInfo:Y,AssistantQuery:wt.exports},data:function(){return{loading:!1,error:null,healthData:null,supervisionData:null,connectionMode:{},refreshInterval:30,autoRefreshTimer:null,aiaiUrl:\"https://devopsyivwvbl820289-euw1-devprol50-aiai.3dx-staging.3ds.com\",backendUrl:\"http://localhost:8080\",showSettings:!1,settingsForm:{aiaiUrl:\"\",refreshInterval:30}}},mounted:function(){var t;console.log(\"[HealthDashboard] Component mounted\"),this.loadPreferences(),this.connectionMode={mode:(t=m())?\"direct\":\"proxy\",description:t?\"Direct API calls via 3DDashboard (trusted mode)\":\"Using backend proxy (standalone mode)\",isTrusted:t},console.log(\"[HealthDashboard] Connection mode:\",this.connectionMode),this.refreshHealth(),this.startAutoRefresh()},beforeDestroy:function(){this.stopAutoRefresh()},methods:{loadPreferences:function(){if(\"undefined\"!=typeof widget&&widget.getValue)try{this.aiaiUrl=widget.getValue(\"aiaiUrl\")||this.aiaiUrl,this.refreshInterval=parseInt(widget.getValue(\"refreshInterval\"))||this.refreshInterval,console.log(\"[HealthDashboard] Loaded preferences:\",{aiaiUrl:this.aiaiUrl,refreshInterval:this.refreshInterval})}catch(t){console.warn(\"[HealthDashboard] Could not load widget preferences:\",t)}},refreshHealth:function(){var t,e=this;return(t=xt().m((function t(){var n,r,a,o;return xt().w((function(t){for(;;)switch(t.p=t.n){case 0:return e.loading=!0,e.error=null,t.p=1,console.log(\"[HealthDashboard] Fetching health data...\"),t.n=2,x(e.backendUrl);case 2:return n=t.v,e.healthData=n,console.log(\"[HealthDashboard] Health data received:\",n),t.p=3,t.n=4,fetch(\"\".concat(e.backendUrl,\"/api/supervision/derive?aiai_url=\").concat(encodeURIComponent(e.aiaiUrl)));case 4:if(!(r=t.v).ok){t.n=6;break}return t.n=5,r.json();case 5:e.supervisionData=t.v;case 6:t.n=8;break;case 7:t.p=7,a=t.v,console.log(\"[HealthDashboard] Supervision data not available:\",a.message);case 8:t.n=10;break;case 9:t.p=9,o=t.v,console.error(\"[HealthDashboard] Failed to fetch health data:\",o),e.error=o.message||\"Unknown error occurred\";case 10:return t.p=10,e.loading=!1,t.f(10);case 11:return t.a(2)}}),t,null,[[3,7],[1,9,10,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){Ct(o,r,a,s,i,\"next\",t)}function i(t){Ct(o,r,a,s,i,\"throw\",t)}s(void 0)}))})()},startAutoRefresh:function(){var t=this;this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=setInterval((function(){console.log(\"[HealthDashboard] Auto-refresh triggered\"),t.refreshHealth()}),1e3*this.refreshInterval)},stopAutoRefresh:function(){this.autoRefreshTimer&&(clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=null)},openSettings:function(){console.log(\"[HealthDashboard] Opening settings dialog\"),this.settingsForm.aiaiUrl=this.aiaiUrl,this.settingsForm.refreshInterval=this.refreshInterval,this.showSettings=!0},closeSettings:function(){this.showSettings=!1},saveSettings:function(){if(console.log(\"[HealthDashboard] Saving settings:\",this.settingsForm),this.aiaiUrl=this.settingsForm.aiaiUrl,this.refreshInterval=this.settingsForm.refreshInterval,\"undefined\"!=typeof widget&&widget.setValue)try{widget.setValue(\"aiaiUrl\",this.aiaiUrl),widget.setValue(\"refreshInterval\",String(this.refreshInterval)),console.log(\"[HealthDashboard] Settings saved to widget preferences\")}catch(t){console.warn(\"[HealthDashboard] Could not save to widget preferences:\",t)}this.stopAutoRefresh(),this.startAutoRefresh(),this.refreshHealth(),this.showSettings=!1}}},Ot=n(452),At=n.n(Ot),jt={insert:\"head\",singleton:!1},Tt=(T()(At.a,jt),At.a.locals,n(489)),Dt=n(368),Pt=n(494),It=n(491),Vt=Object(V.a)(kt,o,[],!1,null,\"4ae0ad98\",null);U()(Vt,{VAlert:st.a,VApp:Tt.a,VBtn:it.a,VCard:N.a,VCardActions:R.a,VCardSubtitle:R.b,VCardText:R.c,VCardTitle:R.d,VChip:Dt.a,VCol:ct.a,VContainer:Pt.a,VDialog:It.a,VIcon:M.a,VProgressCircular:ft.a,VRow:mt.a,VSpacer:bt.a,VTextField:yt.a}),Vt.options.__file=\"src/components/HealthDashboard.vue\";var Et=Vt.exports,Ut=n(469);n(459);a.a.use(Ut.a);var Nt=new Ut.a({icons:{iconfont:\"mdi\"}}),Rt=n(467);a.a.use(Rt.a);var Ft=new Rt.a.Store({state:{},mutations:{},actions:{},getters:{}});e.default=function(){widget.addEvent(\"onLoad\",(function(){r.b.disableCSS(!0),window.title=\"AI Assistant Health Dashboard\",widget.setTitle(window.title),console.log(\"[Main] Initializing Health Dashboard widget\"),new a.a({store:Ft,vuetify:Nt,render:function(t){return t(Et)}}).$mount(\"app\"),console.log(\"[Main] Health Dashboard mounted successfully\"),requirejs([\"DS/PlatformAPI/PlatformAPI\"],(function(t){console.log(\"[Main] PlatformAPI loaded\")}))})),widget.addEvent(\"onRefresh\",(function(){}))}},381:function(t,e,n){(e=n(317)(!1)).push([t.i,\"\\n.status-card[data-v-3670a15c] {\\n  height: 100%;\\n  transition: all 0.3s ease;\\n}\\n.status-card[data-v-3670a15c]:hover {\\n  transform: translateY(-4px);\\n  box-shadow: 0 8px 16px rgba(0,0,0,0.2);\\n}\\n.opacity-80[data-v-3670a15c] {\\n  opacity: 0.8;\\n}\\n.opacity-50[data-v-3670a15c] {\\n  opacity: 0.5;\\n}\\n\",\"\"]),t.exports=e},399:function(t,e,n){(e=n(317)(!1)).push([t.i,\"\\n.v-data-table td[data-v-46354183] {\\n  padding: 8px 16px !important;\\n}\\n\",\"\"]),t.exports=e},402:function(t,e,n){(e=n(317)(!1)).push([t.i,\"\\n.structure-tree[data-v-7db409ba] {\\n  font-family: monospace;\\n  font-size: 14px;\\n}\\n.tree-node[data-v-7db409ba] {\\n  margin-bottom: 4px;\\n}\\n.node-header[data-v-7db409ba] {\\n  display: flex;\\n  align-items: center;\\n  padding: 4px 0;\\n}\\n.node-icon[data-v-7db409ba] {\\n  font-size: 16px;\\n  line-height: 1;\\n}\\n.node-name[data-v-7db409ba] {\\n  margin-left: 8px;\\n  font-weight: 500;\\n  font-size: 14px;\\n}\\n.node-quantity[data-v-7db409ba] {\\n  margin-left: 8px;\\n  padding: 2px 8px;\\n  background-color: #e3f2fd;\\n  border-radius: 12px;\\n  font-size: 11px;\\n  font-weight: 600;\\n  color: #1976d2;\\n}\\n.node-children[data-v-7db409ba] {\\n  margin-top: 4px;\\n}\\n.json-view[data-v-7db409ba] {\\n  background-color: #f5f5f5;\\n  padding: 16px;\\n  border-radius: 4px;\\n  overflow-x: auto;\\n  font-family: 'Courier New', monospace;\\n  font-size: 13px;\\n  line-height: 1.5;\\n}\\n.gap-2[data-v-7db409ba] {\\n  gap: 8px;\\n}\\n\",\"\"]),t.exports=e},452:function(t,e,n){(e=n(317)(!1)).push([t.i,\"\\n.v-application[data-v-4ae0ad98] {\\n  background-color: #f5f5f5;\\n}\\n.v-card[data-v-4ae0ad98] {\\n  transition: all 0.3s ease;\\n}\\n.v-card[data-v-4ae0ad98]:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\\n}\\n\",\"\"]),t.exports=e}}]);","extractedComments":[]}