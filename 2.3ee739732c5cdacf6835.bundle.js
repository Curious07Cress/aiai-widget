(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{315:function(t,e,n){"use strict";n.r(e);var a=n(121),r=n(320),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-container",{staticClass:"pa-4",attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-card",{staticClass:"mb-4",attrs:{flat:""}},[n("v-card-title",{staticClass:"text-h5"},[n("v-icon",{attrs:{left:"",large:"",color:"primary"}},[t._v("mdi-monitor-dashboard")]),t._v("\n            AI Assistant Health Dashboard\n          ")],1),t._v(" "),n("v-card-subtitle",[n("v-chip",{staticClass:"mr-2",attrs:{small:"",color:t.connectionMode.isTrusted?"success":"info"}},[n("v-icon",{attrs:{left:"",small:""}},[t._v(t._s(t.connectionMode.isTrusted?"mdi-shield-check":"mdi-server"))]),t._v("\n              "+t._s(t.connectionMode.description)+"\n            ")],1),t._v(" "),n("v-chip",{attrs:{small:"",outlined:""}},[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-clock-outline")]),t._v("\n              Auto-refresh: "+t._s(t.refreshInterval)+"s\n            ")],1)],1)],1)],1)],1),t._v(" "),t.loading&&!t.healthData?n("v-row",[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"64"}}),t._v(" "),n("p",{staticClass:"mt-4 text-h6"},[t._v("Loading health data...")])],1)],1):t.error?n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-alert",{attrs:{type:"error",prominent:""}},[n("v-row",{attrs:{align:"center"}},[n("v-col",{staticClass:"grow"},[n("div",{staticClass:"text-h6"},[t._v("Failed to load health data")]),t._v(" "),n("div",[t._v(t._s(t.error))])]),t._v(" "),n("v-col",{staticClass:"shrink"},[n("v-btn",{attrs:{color:"white",outlined:""},on:{click:t.refreshHealth}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n                Retry\n              ")],1)],1)],1)],1)],1)],1):t.healthData?n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("status-bar",{attrs:{"health-data":t.healthData,loading:t.loading},on:{refresh:t.refreshHealth}})],1)],1):t._e(),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("assistant-query")],1)],1),t._v(" "),t.healthData&&t.supervisionData?n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("service-info",{attrs:{data:t.supervisionData}})],1)],1):t._e(),t._v(" "),n("v-row",[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("v-btn",{staticClass:"mr-2",attrs:{color:"primary",loading:t.loading},on:{click:t.refreshHealth}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n          Refresh Now\n        ")],1),t._v(" "),n("v-btn",{attrs:{outlined:""},on:{click:t.openSettings}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-cog")]),t._v("\n          Settings\n        ")],1)],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.showSettings,callback:function(e){t.showSettings=e},expression:"showSettings"}},[n("v-card",[n("v-card-title",[n("v-icon",{attrs:{left:""}},[t._v("mdi-cog")]),t._v("\n        Widget Settings\n      ")],1),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"AIAI API URL",outlined:"",dense:"",hint:"Base URL for AIAI service","persistent-hint":""},model:{value:t.settingsForm.aiaiUrl,callback:function(e){t.$set(t.settingsForm,"aiaiUrl",e)},expression:"settingsForm.aiaiUrl"}}),t._v(" "),n("v-text-field",{staticClass:"mt-4",attrs:{label:"Auto-refresh Interval (seconds)",outlined:"",dense:"",type:"number",min:"10",hint:"How often to refresh health data","persistent-hint":""},model:{value:t.settingsForm.refreshInterval,callback:function(e){t.$set(t.settingsForm,"refreshInterval",t._n(e))},expression:"settingsForm.refreshInterval"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.closeSettings}},[t._v("Cancel")]),t._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:t.saveSettings}},[t._v("Save")])],1)],1)],1)],1)};o._withStripped=!0;var s=n(472);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var l=a&&a.prototype instanceof i?a:i,c=Object.create(l.prototype);return v(c,"_invoke",function(n,a,r){var o,i,l,c=0,u=r||[],d=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,i=0,l=t,v.n=n,s}};function p(n,a){for(i=n,l=a,e=0;!d&&c&&!r&&e<u.length;e++){var r,o=u[e],p=v.p,f=o[2];n>3?(r=f===a)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=p&&((r=n<2&&p<o[1])?(i=0,v.v=a,v.n=o[1]):p<f&&(r=n<3||o[0]>a||a>f)&&(o[4]=n,o[5]=a,v.n=f,i=0))}if(r||n>1)return s;throw d=!0,a}return function(r,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),i=u,l=f;(e=i<2?t:l)||!d;){o||(i?i<3?(i>1&&(v.n=-1),p(i,l)):v.n=l:v.v=l);try{if(c=2,o){if(i||(r="next"),e=o[r]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=t}else if((e=(d=v.n<0)?l:n.call(a,v))!==s)break}catch(e){o=t,i=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,r,o),!0),c}var s={};function i(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][a]?e(e([][a]())):(v(e={},a,(function(){return this})),e),p=c.prototype=i.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,v(t,r,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=c,v(p,"constructor",c),v(c,"constructor",l),l.displayName="GeneratorFunction",v(c,r,"GeneratorFunction"),v(p),v(p,r,"Generator"),v(p,a,(function(){return this})),v(p,"toString",(function(){return"[object Generator]"})),(d=function(){return{w:o,m:f}})()}function v(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(v=function(t,e,n,a){function o(e,n){v(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function p(t,e,n,a,r,o,s){try{var i=t[o](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){p(o,a,r,s,i,"next",t)}function i(t){p(o,a,r,s,i,"throw",t)}s(void 0)}))}}var h=!1;function m(){return b.apply(this,arguments)}function b(){return(b=f(d().m((function t(){var e;return d().w((function(t){for(;;)switch(t.p=t.n){case 0:if(!h){t.n=1;break}return console.log("[ApiService] Already initialized"),t.a(2);case 1:if(t.p=1,"undefined"==typeof window||!window.widget||!window.widget.uwaUrl){t.n=3;break}return console.log("[ApiService] Initializing Platform Connectors..."),t.n=2,Object(s.b)({securityContexts:[]});case 2:h=!0,console.log("[ApiService] Platform Connectors initialized successfully");case 3:t.n=5;break;case 4:t.p=4,e=t.v,console.warn("[ApiService] Failed to initialize Platform Connectors:",e),h=!1;case 5:return t.a(2)}}),t,null,[[1,4]])})))).apply(this,arguments)}function g(){try{return!("undefined"==typeof window||!window.widget)&&("function"==typeof s.a&&(!!window.widget.uwaUrl&&(h?(console.log("[ApiService] Running in trusted mode (3DDashboard)"),!0):(console.log("[ApiService] Platform Connectors not yet initialized"),!1))))}catch(t){return console.log("[ApiService] Not in trusted mode:",t.message),!1}}function y(t){return _.apply(this,arguments)}function _(){return(_=f(d().m((function t(e){var n,a,r,o,i,l=arguments;return d().w((function(t){for(;;)switch(t.p=t.n){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:null,!g()){t.n=6;break}return t.p=1,console.log("[ApiService] Direct call to: ".concat(e)),t.n=2,Object(s.a)(e,{method:n.method||"GET",headers:n.headers||{},body:n.body,timeout:n.timeout||3e4});case 2:return o=t.v,console.log("[ApiService] Direct call succeeded"),t.a(2,o);case 3:if(t.p=3,i=t.v,console.warn("[ApiService] Direct call failed:",i),console.warn("[ApiService] Error details - Type: ".concat(u(i),", Message: ").concat((null==i?void 0:i.message)||"no message")),i.backendresponse&&console.warn("[ApiService] Backend response:",i.backendresponse),i.response_hdrs&&console.warn("[ApiService] Response headers:",i.response_hdrs),!a||!r){t.n=5;break}return console.log("[ApiService] Falling back to backend proxy"),t.n=4,w(a,r,n);case 4:return t.a(2,t.v);case 5:throw i;case 6:if(a&&r){t.n=7;break}throw new Error("Backend proxy not configured for standalone mode. Please start the backend server.");case 7:return console.log("[ApiService] Using backend proxy: ".concat(a).concat(r)),t.n=8,w(a,r,n);case 8:return t.a(2,t.v)}}),t,null,[[1,3]])})))).apply(this,arguments)}function w(t,e){return x.apply(this,arguments)}function x(){return(x=f(d().m((function t(e,n){var a,r,o,s,i,c,u,v=arguments;return d().w((function(t){for(;;)switch(t.p=t.n){case 0:return a=v.length>2&&void 0!==v[2]?v[2]:{},r="".concat(e).concat(n),o=new AbortController,s=setTimeout((function(){return o.abort()}),a.timeout||3e4),t.p=1,t.n=2,fetch(r,{method:a.method||"GET",headers:l({"Content-Type":"application/json"},a.headers),body:a.body?JSON.stringify(a.body):void 0,signal:o.signal});case 2:if(i=t.v,clearTimeout(s),i.ok){t.n=4;break}return t.n=3,i.text();case 3:throw c=t.v,new Error("HTTP ".concat(i.status,": ").concat(c));case 4:return t.n=5,i.json();case 5:return t.a(2,t.v);case 6:if(t.p=6,u=t.v,clearTimeout(s),"AbortError"!==u.name){t.n=7;break}throw new Error("Request timeout");case 7:throw u;case 8:return t.a(2)}}),t,null,[[1,6]])})))).apply(this,arguments)}var C=function(t,e){var n=arguments;return f(d().m((function a(){var r,o,s,i;return d().w((function(a){for(;;)switch(a.n){case 0:return r=n.length>2&&void 0!==n[2]?n[2]:"",o="".concat(t,"/api/v1/assistants"),s={method:"GET"},i="/api/aiai/assistants?aiai_url=".concat(encodeURIComponent(t)).concat(r?"&assistant_namespace=".concat(r):""),a.n=1,y(o,s,e,i);case 1:return a.a(2,a.v)}}),a)})))()},S=function(t,e,n,a){var r=arguments;return f(d().m((function o(){var s,i,l,c;return d().w((function(o){for(;;)switch(o.n){case 0:return s=r.length>4&&void 0!==r[4]?r[4]:"",i="".concat(t,"/api/v1/assistants/").concat(n,"/submit"),l={method:"POST",headers:{"Content-Type":"application/json"},body:a,timeout:6e4},c="/api/aiai/assistants/".concat(n,"/submit?aiai_url=").concat(encodeURIComponent(t)).concat(s?"&assistant_namespace=".concat(s):""),o.n=1,y(i,l,e,c);case 1:return o.a(2,o.v)}}),o)})))()},k=function(t){return f(d().m((function e(){return d().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,w(t,"/api/health/all",{method:"GET"});case 1:return e.a(2,e.v)}}),e)})))()};var A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"status-bar",attrs:{flat:"",outlined:""}},[n("v-card-text",{staticClass:"py-2 px-4"},[n("v-row",{staticClass:"ma-0",attrs:{align:"center"}},[n("v-col",{staticClass:"pa-0 pr-4",attrs:{cols:"auto"}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,r=e.attrs;return[n("div",t._g(t._b({staticClass:"status-item"},"div",r,!1),a),[n("span",{staticClass:"status-label"},[t._v("Status:")]),t._v(" "),n("v-icon",{staticClass:"mx-1",attrs:{color:t.overallStatusColor,small:""}},[t._v("mdi-circle")]),t._v(" "),n("span",{staticClass:"status-text"},[t._v(t._s(t.overallStatusText))])],1)]}}])},[t._v(" "),n("span",[t._v("Overall system health status")])])],1),t._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),t._v(" "),n("v-col",{staticClass:"pa-0 pr-4",attrs:{cols:"auto"}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,r=e.attrs;return[n("div",t._g(t._b({staticClass:"status-item"},"div",r,!1),a),[n("span",{staticClass:"status-label"},[t._v("AIAI:")]),t._v(" "),n("v-icon",{staticClass:"mx-1",attrs:{color:t.aiaiStatusColor,small:""}},[t._v("mdi-circle")]),t._v(" "),n("span",{staticClass:"status-text"},[t._v(t._s(t.aiaiResponseTime))])],1)]}}])},[t._v(" "),n("div",[n("div",[n("strong",[t._v("AIAI Service Status:")]),t._v(" "+t._s(t.aiaiStatus))]),t._v(" "),t.aiaiDetails?n("div",[t.aiaiDetails.assistant_count?n("div",[n("strong",[t._v("Assistants:")]),t._v(" "+t._s(t.aiaiDetails.assistant_count)+"\n              ")]):t._e(),t._v(" "),t.aiaiDetails.endpoint?n("div",[n("strong",[t._v("Endpoint:")]),t._v(" "+t._s(t.aiaiDetails.endpoint)+"\n              ")]):t._e()]):t._e()])])],1),t._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),t._v(" "),n("v-col",{staticClass:"pa-0 pr-2",attrs:{cols:"auto"}},[n("div",{staticClass:"status-item"},[n("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-clock-outline")]),t._v(" "),n("span",{staticClass:"status-label"},[t._v("Updated:")]),t._v(" "),n("span",{staticClass:"status-text ml-1"},[t._v(t._s(t.lastUpdatedText))])],1)]),t._v(" "),n("v-col",{staticClass:"pa-0",attrs:{cols:"auto"}},[n("v-btn",{staticClass:"refresh-btn",attrs:{icon:"","x-small":"",loading:t.loading},on:{click:t.handleRefresh}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),n("v-spacer"),t._v(" "),t.showUptime?n("v-col",{staticClass:"pa-0",attrs:{cols:"auto"}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,r=e.attrs;return[n("div",t._g(t._b({staticClass:"status-item text-caption"},"div",r,!1),a),[n("v-icon",{staticClass:"mr-1",attrs:{"x-small":""}},[t._v("mdi-chart-line")]),t._v(" "),n("span",[t._v(t._s(t.uptimePercentage)+"% uptime")])],1)]}}],null,!1,3182589884)},[t._v(" "),n("span",[t._v("24-hour uptime percentage")])])],1):t._e()],1)],1)],1)};A._withStripped=!0;var O={name:"StatusBar",props:{healthData:{type:Object,default:null},loading:{type:Boolean,default:!1},showUptime:{type:Boolean,default:!1},uptimePercentage:{type:Number,default:100}},computed:{overallStatusText:function(){return this.healthData&&this.healthData.overall?this.capitalize(this.healthData.overall):"Unknown"},overallStatusColor:function(){var t;return this.getStatusColor(null===(t=this.healthData)||void 0===t?void 0:t.overall)},aiaiStatus:function(){var t,e,n;return(null===(t=this.healthData)||void 0===t||null===(e=t.services)||void 0===e||null===(n=e.aiai)||void 0===n?void 0:n.status)||"unknown"},aiaiStatusColor:function(){return this.getStatusColor(this.aiaiStatus)},aiaiResponseTime:function(){var t,e,n,a=null===(t=this.healthData)||void 0===t||null===(e=t.services)||void 0===e||null===(n=e.aiai)||void 0===n?void 0:n.response_time_ms;return null==a?"N/A":"".concat(a,"ms")},aiaiDetails:function(){var t,e,n;return(null===(t=this.healthData)||void 0===t||null===(e=t.services)||void 0===e||null===(n=e.aiai)||void 0===n?void 0:n.details)||null},lastUpdatedText:function(){if(!this.healthData||!this.healthData.timestamp)return"Never";try{var t=new Date(this.healthData.timestamp),e=new Date-t,n=Math.floor(e/1e3);if(n<5)return"Just now";if(n<60)return"".concat(n,"s ago");var a=Math.floor(n/60);if(a<60)return"".concat(a,"m ago");var r=Math.floor(a/60);return"".concat(r,"h ago")}catch(t){return"Unknown"}}},methods:{getStatusColor:function(t){if(!t)return"grey";var e=t.toLowerCase();return"healthy"===e||"ok"===e?"success":"degraded"===e||"warning"===e?"warning":"unhealthy"===e||"error"===e?"error":"grey"},capitalize:function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},handleRefresh:function(){console.log("[StatusBar] Refresh button clicked"),this.$emit("refresh")}}},T=n(332),D=n.n(T),I=n(381),j=n.n(I),P={insert:"head",singleton:!1},V=(D()(j.a,P),j.a.locals,n(333)),U=n(334),E=n.n(U),R=n(357),F=n(361),N=n(324),M=n(486),H=n(363),G=n(364),Q=n(487),q=n(488),J=n(489),z=Object(V.a)(O,A,[],!1,null,"4e428641",null);E()(z,{VBtn:R.a,VCard:F.a,VCardText:N.c,VCol:M.a,VDivider:H.a,VIcon:G.a,VRow:Q.a,VSpacer:q.a,VTooltip:J.a}),z.options.__file="src/components/StatusBar.vue";var B=z.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("v-icon",{attrs:{left:""}},[t._v("mdi-information-outline")]),t._v("\n    Service Information\n  ")],1),t._v(" "),n("v-card-text",[t.data?n("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("tbody",t._l(t.displayData,(function(e,a){return n("tr",{key:a},[n("td",{staticClass:"font-weight-bold text-no-wrap"},[t._v(t._s(t.formatKey(a)))]),t._v(" "),n("td",[t._v(t._s(t.formatValue(e)))])])})),0)]},proxy:!0}],null,!1,1944005260)}):n("div",{staticClass:"text-center py-4 grey--text"},[t._v("\n      No service information available\n    ")])],1)],1)};function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}L._withStripped=!0;var K={name:"ServiceInfo",props:{data:{type:Object,default:null}},computed:{displayData:function(){var t=this;if(!this.data)return null;var e={};return Object.keys(this.data).forEach((function(n){var a=t.data[n];"object"===$(a)&&null!==a||(e[n]=a)})),e}},methods:{formatKey:function(t){return t.replace(/_/g," ").replace(/\b\w/g,(function(t){return t.toUpperCase()}))},formatValue:function(t){return"boolean"==typeof t?t?"Yes":"No":null==t?"N/A":String(t)}}},Y=n(407),W=n.n(Y),X={insert:"head",singleton:!1},Z=(D()(W.a,X),W.a.locals,n(490)),tt=Object(V.a)(K,L,[],!1,null,"46354183",null);E()(tt,{VCard:F.a,VCardText:N.c,VCardTitle:N.d,VIcon:G.a,VSimpleTable:Z.a}),tt.options.__file="src/components/ServiceInfo.vue";var et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-robot-outline")]),t._v("\n    Query AI Assistant\n  ")],1),t._v(" "),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{items:t.assistants,"item-text":"text","item-value":"value",label:"Assistant",outlined:"",dense:"","prepend-inner-icon":"mdi-robot",loading:t.loadingAssistants,disabled:t.loading||t.loadingAssistants,hint:"Select AI assistant to query","persistent-hint":""},model:{value:t.selectedAssistant,callback:function(e){t.selectedAssistant=e},expression:"selectedAssistant"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"d-flex align-center",staticStyle:{height:"40px"}},[n("v-btn",{staticClass:"mr-2",attrs:{small:"",outlined:"",color:"primary",disabled:t.loading},on:{click:t.copyConversationId}},[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-content-copy")]),t._v("\n            Copy ID\n          ")],1),t._v(" "),n("v-btn",{attrs:{small:"",outlined:"",color:"secondary",disabled:t.loading},on:{click:t.newConversation}},[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-plus-circle")]),t._v("\n            New\n          ")],1)],1)])],1),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{label:"Prompt",outlined:"",rows:"4",placeholder:"Enter your prompt here... (e.g., 'create a product structure for a toy car')",disabled:t.loading,counter:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}})],1)],1),t._v(" "),n("v-expansion-panels",{attrs:{flat:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("span",[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-tune")]),t._v("\n            Advanced Options\n          ")],1)]),t._v(" "),n("v-expansion-panel-content",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{items:t.availableModels,label:"LLM Model",outlined:"",dense:"",disabled:t.loading},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{items:t.languages,label:"Prompt Language",outlined:"",dense:"",disabled:t.loading},model:{value:t.language,callback:function(e){t.language=e},expression:"language"}})],1)],1),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-switch",{attrs:{label:"Enable Streaming",disabled:t.loading,dense:""},model:{value:t.streamEnabled,callback:function(e){t.streamEnabled=e},expression:"streamEnabled"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-switch",{attrs:{label:"Mock Mode",disabled:t.loading,dense:"",hint:"Use mock data for testing","persistent-hint":""},model:{value:t.mockMode,callback:function(e){t.mockMode=e},expression:"mockMode"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-switch",{attrs:{label:"NoCode Companion",disabled:t.loading,dense:""},model:{value:t.isNoCodeCompanion,callback:function(e){t.isNoCodeCompanion=e},expression:"isNoCodeCompanion"}})],1)],1),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{label:"Context (JSON)",outlined:"",rows:"3",placeholder:'{"message": {"selected_dimensions": {...}}}',disabled:t.loading,dense:""},model:{value:t.contextJson,callback:function(e){t.contextJson=e},expression:"contextJson"}})],1)],1)],1)],1)],1),t._v(" "),n("v-row",{staticClass:"mt-4"},[n("v-col",{staticClass:"d-flex gap-2",attrs:{cols:"12"}},[n("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:!t.prompt||!t.selectedAssistant},on:{click:t.submitQuery}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-send")]),t._v("\n          Submit Query\n        ")],1),t._v(" "),n("v-btn",{attrs:{outlined:"",disabled:t.loading},on:{click:t.clearForm}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-close")]),t._v("\n          Clear\n        ")],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",small:"",disabled:!t.response},on:{click:t.copyResponse}},[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-content-copy")]),t._v("\n          Copy Response\n        ")],1)],1)],1),t._v(" "),n("v-divider",{staticClass:"my-4"}),t._v(" "),t.loading?n("div",{staticClass:"text-center py-8"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"48"}}),t._v(" "),n("p",{staticClass:"mt-4 text-subtitle-1"},[t._v("Processing your request...")])],1):t.error?n("div",{staticClass:"mt-4"},[n("v-alert",{attrs:{type:"error",outlined:""}},[n("div",{staticClass:"text-h6"},[t._v("Error")]),t._v(" "),n("div",[t._v(t._s(t.error))])])],1):t.response?n("div",{staticClass:"mt-4"},[n("v-card",{staticClass:"mb-4",attrs:{outlined:""}},[n("v-card-subtitle",{staticClass:"pb-0"},[n("v-icon",{attrs:{left:"",small:"",color:"info"}},[t._v("mdi-information")]),t._v("\n          Summary\n        ")],1),t._v(" "),n("v-card-text",[n("div",{staticClass:"text-body-1"},[t._v(t._s(t.response.summary))])])],1),t._v(" "),n("v-card",{attrs:{outlined:""}},[n("v-card-subtitle",{staticClass:"pb-0 d-flex align-center"},[n("v-icon",{attrs:{left:"",small:"",color:"success"}},[t._v("mdi-file-tree")]),t._v("\n          Structure\n          "),n("v-spacer"),t._v(" "),n("v-btn-toggle",{attrs:{dense:"",mandatory:""},model:{value:t.viewMode,callback:function(e){t.viewMode=e},expression:"viewMode"}},[n("v-btn",{attrs:{small:"",value:"tree"}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-file-tree")]),t._v("\n              Tree\n            ")],1),t._v(" "),n("v-btn",{attrs:{small:"",value:"json"}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-code-json")]),t._v("\n              JSON\n            ")],1)],1)],1),t._v(" "),n("v-card-text",["tree"===t.viewMode?n("div",{staticClass:"structure-tree"},[n("tree-node",{attrs:{node:t.response.structure,level:0}})],1):n("pre",{staticClass:"json-view"},[t._v(t._s(JSON.stringify(t.response.structure,null,2)))])])],1),t._v(" "),n("v-card",{staticClass:"mt-4",attrs:{outlined:""}},[n("v-card-subtitle",{staticClass:"pb-0"},[n("v-icon",{attrs:{left:"",small:""}},[t._v("mdi-chart-box-outline")]),t._v("\n          Response Metadata\n        ")],1),t._v(" "),n("v-card-text",[n("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("tbody",[n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v("Model")]),t._v(" "),n("td",[t._v(t._s(t.response.metadata.model||"N/A"))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v("Tokens (Total)")]),t._v(" "),n("td",[t._v(t._s(t.response.metadata.totalTokens||"N/A"))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v("Finish Reason")]),t._v(" "),n("td",[t._v(t._s(t.response.metadata.finishReason||"N/A"))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v("Timestamp")]),t._v(" "),n("td",[t._v(t._s(t.formatTimestamp(t.response.metadata.timestamp)))])])])]},proxy:!0}])})],1)],1)],1):n("div",{staticClass:"text-center py-8 grey--text"},[n("v-icon",{attrs:{size:"64",color:"grey lighten-1"}},[t._v("mdi-robot-outline")]),t._v(" "),n("p",{staticClass:"mt-4 text-subtitle-1"},[t._v("Submit a query to see results")])],1)],1),t._v(" "),n("v-snackbar",{attrs:{color:t.snackbar.color,timeout:3e3,top:"",right:""},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snackbar.show=!1}}},"v-btn",a,!1),[t._v("\n        Close\n      ")])]}}]),model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v("\n    "+t._s(t.snackbar.message)+"\n    ")])],1)};function at(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var l=a&&a.prototype instanceof i?a:i,c=Object.create(l.prototype);return rt(c,"_invoke",function(n,a,r){var o,i,l,c=0,u=r||[],d=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,i=0,l=t,v.n=n,s}};function p(n,a){for(i=n,l=a,e=0;!d&&c&&!r&&e<u.length;e++){var r,o=u[e],p=v.p,f=o[2];n>3?(r=f===a)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=p&&((r=n<2&&p<o[1])?(i=0,v.v=a,v.n=o[1]):p<f&&(r=n<3||o[0]>a||a>f)&&(o[4]=n,o[5]=a,v.n=f,i=0))}if(r||n>1)return s;throw d=!0,a}return function(r,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),i=u,l=f;(e=i<2?t:l)||!d;){o||(i?i<3?(i>1&&(v.n=-1),p(i,l)):v.n=l:v.v=l);try{if(c=2,o){if(i||(r="next"),e=o[r]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=t}else if((e=(d=v.n<0)?l:n.call(a,v))!==s)break}catch(e){o=t,i=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,r,o),!0),c}var s={};function i(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][a]?e(e([][a]())):(rt(e={},a,(function(){return this})),e),d=c.prototype=i.prototype=Object.create(u);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,rt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,rt(d,"constructor",c),rt(c,"constructor",l),l.displayName="GeneratorFunction",rt(c,r,"GeneratorFunction"),rt(d),rt(d,r,"Generator"),rt(d,a,(function(){return this})),rt(d,"toString",(function(){return"[object Generator]"})),(at=function(){return{w:o,m:v}})()}function rt(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(rt=function(t,e,n,a){function o(e,n){rt(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function ot(t,e,n,a,r,o,s){try{var i=t[o](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function st(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){ot(o,a,r,s,i,"next",t)}function i(t){ot(o,a,r,s,i,"throw",t)}s(void 0)}))}}nt._withStripped=!0;var it={name:"AssistantQuery",components:{TreeNode:{name:"TreeNode",props:{node:{type:Object,required:!0},level:{type:Number,default:0}},template:'\n    <div :style="{ marginLeft: (level * 20) + \'px\' }" class="tree-node">\n      <div class="node-header">\n        <span :class="[\'node-icon\', hasChildren ? \'folder\' : \'file\']">\n          {{ hasChildren ? \'üìÅ\' : \'üìÑ\' }}\n        </span>\n        <span class="node-name">{{ node.name }}</span>\n        <span v-if="node.quantity" class="node-quantity">\n          Qty: {{ node.quantity }}\n        </span>\n      </div>\n      <div v-if="hasChildren" class="node-children">\n        <tree-node\n          v-for="(child, index) in node.components"\n          :key="index"\n          :node="child"\n          :level="level + 1"\n        />\n      </div>\n    </div>\n  ',computed:{hasChildren:function(){return this.node.components&&this.node.components.length>0}}}},data:function(){return{selectedAssistant:"",prompt:"",conversationId:"",model:"mistralai/mistral-small-2506",language:"en",streamEnabled:!1,mockMode:!1,isNoCodeCompanion:!1,contextJson:"",loading:!1,loadingAssistants:!1,error:null,response:null,viewMode:"tree",snackbar:{show:!1,message:"",color:"success"},aiaiUrl:"https://devopsyivwvbl820289-euw1-devprol50-aiai.3dx-staging.3ds.com",backendUrl:"http://localhost:8080",assistants:[],availableModels:["mistralai/mistral-small-2506","mistralai/mistral-large-2411","anthropic/claude-3-5-sonnet-20241022","openai/gpt-4o-2024-11-20"],languages:[{text:"English",value:"en"},{text:"French",value:"fr"},{text:"German",value:"de"},{text:"Spanish",value:"es"}]}},mounted:function(){if(console.log("[AssistantQuery] Component mounted"),this.generateConversationId(),"undefined"!=typeof widget&&widget.getValue)try{this.aiaiUrl=widget.getValue("aiaiUrl")||this.aiaiUrl,console.log("[AssistantQuery] Loaded aiaiUrl from preferences:",this.aiaiUrl)}catch(t){console.warn("[AssistantQuery] Could not load widget preferences:",t)}this.fetchAssistants()},methods:{fetchAssistants:function(){var t=this;return st(at().m((function e(){var n,a,r;return at().w((function(e){for(;;)switch(e.p=e.n){case 0:return t.loadingAssistants=!0,e.p=1,console.log("[AssistantQuery] Fetching assistants from:",t.aiaiUrl),e.n=2,C(t.aiaiUrl,t.backendUrl);case 2:n=e.v,console.log("[AssistantQuery] Raw assistant list:",n),console.log("[AssistantQuery] First assistant:",n[0]),console.log("[AssistantQuery] First assistant keys:",Object.keys(n[0]||{})),t.assistants=n.map((function(t){return{text:t.assistant__name||t.assistant__id,value:t.assistant__name||t.assistant__id}})),t.assistants.length>0&&(a=t.assistants.find((function(t){return"asmstruct"===t.value})),t.selectedAssistant=a?a.value:t.assistants[0].value),console.log("[AssistantQuery] Loaded assistants:",t.assistants),e.n=4;break;case 3:e.p=3,r=e.v,console.error("[AssistantQuery] Failed to load assistants:",r),t.assistants=[{text:"Assembly Structure (asmstruct)",value:"asmstruct"}],t.selectedAssistant="asmstruct";case 4:return e.p=4,t.loadingAssistants=!1,e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})))()},generateConversationId:function(){this.conversationId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),console.log("[AssistantQuery] Generated conversation ID:",this.conversationId)},copyConversationId:function(){var t=this;return st(at().m((function e(){var n;return at().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,navigator.clipboard.writeText(t.conversationId);case 1:console.log("[AssistantQuery] Copied conversation ID to clipboard"),t.snackbar={show:!0,message:"Conversation ID copied: ".concat(t.conversationId.substring(0,8),"..."),color:"success"},e.n=3;break;case 2:e.p=2,n=e.v,console.error("[AssistantQuery] Failed to copy to clipboard:",n),t.snackbar={show:!0,message:"Failed to copy conversation ID",color:"error"};case 3:return e.a(2)}}),e,null,[[0,2]])})))()},newConversation:function(){console.log("[AssistantQuery] Starting new conversation"),this.generateConversationId(),this.response=null,this.error=null,this.snackbar={show:!0,message:"New conversation started",color:"info"}},submitQuery:function(){var t=this;return st(at().m((function e(){var n,a,r,o;return at().w((function(e){for(;;)switch(e.p=e.n){case 0:if(console.log("[AssistantQuery] Submitting query to:",t.selectedAssistant),t.loading=!0,t.error=null,t.response=null,e.p=1,!t.mockMode){e.n=3;break}return console.log("[AssistantQuery] Using mock mode"),e.n=2,new Promise((function(t){return setTimeout(t,1500)}));case 2:return t.response=t.parseMockResponse(),e.a(2);case 3:if(n={prompt:t.prompt,"llm.stream":t.streamEnabled,"llm.model":t.model,prompt_language:t.language,mock:t.mockMode},t.conversationId&&(n.conversation_id=t.conversationId),!t.contextJson){e.n=6;break}e.p=4,n.context=JSON.parse(t.contextJson),e.n=6;break;case 5:throw e.p=5,r=e.v,new Error("Invalid context JSON: ".concat(r.message));case 6:return console.log("[AssistantQuery] Request body:",n),e.n=7,S(t.aiaiUrl,t.backendUrl,t.selectedAssistant,n,"");case 7:a=e.v,console.log("[AssistantQuery] API response:",a),t.response=t.parseResponse(a),console.log("[AssistantQuery] Parsed response:",t.response),e.n=9;break;case 8:e.p=8,o=e.v,console.error("[AssistantQuery] Error submitting query:",o),t.error=o.message||"Failed to submit query";case 9:return e.p=9,t.loading=!1,e.f(9);case 10:return e.a(2)}}),e,null,[[4,5],[1,8,9,10]])})))()},parseResponse:function(t){try{var e,n,a,r,o,s,i,l,c,u,d,v=null===(e=t.llm)||void 0===e||null===(n=e.choices)||void 0===n||null===(a=n[0])||void 0===a||null===(r=a.message)||void 0===r?void 0:r.content;if(!v)throw new Error("No content in API response");var p=v.indexOf("{");if(-1===p)throw new Error("No JSON found in response");var f=v.substring(p),h=JSON.parse(f);return{summary:h.summary||"No summary provided",structure:h.structure||{},metadata:{model:(null===(o=t.llm)||void 0===o?void 0:o.model)||"N/A",totalTokens:(null===(s=t.llm)||void 0===s||null===(i=s.usage)||void 0===i?void 0:i.total_tokens)||0,finishReason:(null===(l=t.llm)||void 0===l||null===(c=l.choices)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.finish_reason)||"N/A",timestamp:(null===(d=t.llm)||void 0===d?void 0:d.created)||Math.floor(Date.now()/1e3)}}}catch(t){throw console.error("[AssistantQuery] Failed to parse response:",t),new Error("Failed to parse response: ".concat(t.message))}},parseMockResponse:function(){var t={llm:{id:"2659f08b-3e8c-42c3-b21f-dae95a33264f",object:"chat.completion",created:Math.floor(Date.now()/1e3),model:this.model,choices:[{message:{content:'[asmstruct] {\n  "summary": "Here is the product structure for a toy car",\n  "structure": {\n    "name": "Toy Car",\n    "components": [\n      {\n        "name": "chassis",\n        "quantity": 1,\n        "components": [\n          {\n            "name": "body",\n            "quantity": 1\n          },\n          {\n            "name": "wheels",\n            "quantity": 4\n          }\n        ]\n      },\n      {\n        "name": "engine",\n        "quantity": 1\n      },\n      {\n        "name": "battery",\n        "quantity": 1\n      },\n      {\n        "name": "remote control",\n        "quantity": 1\n      }\n    ]\n  }\n}',role:"assistant"},index:0,logprobs:-1,finish_reason:"stop"}],usage:{prompt_tokens:120,completion_tokens:85,total_tokens:205}}},e=t.llm.choices[0].message.content,n=e.indexOf("{"),a=e.substring(n),r=JSON.parse(a);return{summary:r.summary,structure:r.structure,metadata:{model:t.llm.model,totalTokens:t.llm.usage.total_tokens,finishReason:t.llm.choices[0].finish_reason,timestamp:t.llm.created}}},clearForm:function(){this.prompt="",this.conversationId="",this.contextJson="",this.error=null,this.response=null},copyResponse:function(){if(this.response){var t=JSON.stringify(this.response.structure,null,2);navigator.clipboard.writeText(t).then((function(){console.log("[AssistantQuery] Response copied to clipboard")}))}},formatTimestamp:function(t){return t?new Date(1e3*t).toLocaleString():"N/A"}}},lt=n(410),ct=n.n(lt),ut={insert:"head",singleton:!1},dt=(D()(ct.a,ut),ct.a.locals,n(502)),vt=n(504),pt=n(491),ft=n(492),ht=n(493),mt=n(494),bt=n(349),gt=n(499),yt=n(496),_t=n(501),wt=n(497),xt=Object(V.a)(it,nt,[],!1,null,"7db409ba",null);function Ct(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var l=a&&a.prototype instanceof i?a:i,c=Object.create(l.prototype);return St(c,"_invoke",function(n,a,r){var o,i,l,c=0,u=r||[],d=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,i=0,l=t,v.n=n,s}};function p(n,a){for(i=n,l=a,e=0;!d&&c&&!r&&e<u.length;e++){var r,o=u[e],p=v.p,f=o[2];n>3?(r=f===a)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=p&&((r=n<2&&p<o[1])?(i=0,v.v=a,v.n=o[1]):p<f&&(r=n<3||o[0]>a||a>f)&&(o[4]=n,o[5]=a,v.n=f,i=0))}if(r||n>1)return s;throw d=!0,a}return function(r,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),i=u,l=f;(e=i<2?t:l)||!d;){o||(i?i<3?(i>1&&(v.n=-1),p(i,l)):v.n=l:v.v=l);try{if(c=2,o){if(i||(r="next"),e=o[r]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=t}else if((e=(d=v.n<0)?l:n.call(a,v))!==s)break}catch(e){o=t,i=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,r,o),!0),c}var s={};function i(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][a]?e(e([][a]())):(St(e={},a,(function(){return this})),e),d=c.prototype=i.prototype=Object.create(u);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,St(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,St(d,"constructor",c),St(c,"constructor",l),l.displayName="GeneratorFunction",St(c,r,"GeneratorFunction"),St(d),St(d,r,"Generator"),St(d,a,(function(){return this})),St(d,"toString",(function(){return"[object Generator]"})),(Ct=function(){return{w:o,m:v}})()}function St(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(St=function(t,e,n,a){function o(e,n){St(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function kt(t,e,n,a,r,o,s){try{var i=t[o](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(a,r)}E()(xt,{VAlert:dt.a,VBtn:R.a,VBtnToggle:vt.a,VCard:F.a,VCardSubtitle:N.b,VCardText:N.c,VCardTitle:N.d,VCol:M.a,VDivider:H.a,VExpansionPanel:pt.a,VExpansionPanelContent:ft.a,VExpansionPanelHeader:ht.a,VExpansionPanels:mt.a,VIcon:G.a,VProgressCircular:bt.a,VRow:Q.a,VSelect:gt.a,VSimpleTable:Z.a,VSnackbar:yt.a,VSpacer:q.a,VSwitch:_t.a,VTextarea:wt.a}),xt.options.__file="src/components/AssistantQuery.vue";var At={name:"HealthDashboard",components:{StatusBar:B,ServiceInfo:et,AssistantQuery:xt.exports},data:function(){return{loading:!1,error:null,healthData:null,supervisionData:null,connectionMode:{},refreshInterval:30,autoRefreshTimer:null,aiaiUrl:"https://devopsyivwvbl820289-euw1-devprol50-aiai.3dx-staging.3ds.com",backendUrl:"http://localhost:8080",showSettings:!1,settingsForm:{aiaiUrl:"",refreshInterval:30}}},mounted:function(){var t;console.log("[HealthDashboard] Component mounted"),this.loadPreferences(),this.connectionMode={mode:(t=g())?"direct":"proxy",description:t?"Direct API calls via 3DDashboard (trusted mode)":"Using backend proxy (standalone mode)",isTrusted:t},console.log("[HealthDashboard] Connection mode:",this.connectionMode),this.refreshHealth(),this.startAutoRefresh()},beforeDestroy:function(){this.stopAutoRefresh()},methods:{loadPreferences:function(){if("undefined"!=typeof widget&&widget.getValue)try{this.aiaiUrl=widget.getValue("aiaiUrl")||this.aiaiUrl,this.refreshInterval=parseInt(widget.getValue("refreshInterval"))||this.refreshInterval,console.log("[HealthDashboard] Loaded preferences:",{aiaiUrl:this.aiaiUrl,refreshInterval:this.refreshInterval})}catch(t){console.warn("[HealthDashboard] Could not load widget preferences:",t)}},refreshHealth:function(){var t,e=this;return(t=Ct().m((function t(){var n,a,r,o;return Ct().w((function(t){for(;;)switch(t.p=t.n){case 0:return e.loading=!0,e.error=null,t.p=1,console.log("[HealthDashboard] Fetching health data..."),t.n=2,k(e.backendUrl);case 2:return n=t.v,e.healthData=n,console.log("[HealthDashboard] Health data received:",n),t.p=3,t.n=4,fetch("".concat(e.backendUrl,"/api/supervision/derive?aiai_url=").concat(encodeURIComponent(e.aiaiUrl)));case 4:if(!(a=t.v).ok){t.n=6;break}return t.n=5,a.json();case 5:e.supervisionData=t.v;case 6:t.n=8;break;case 7:t.p=7,r=t.v,console.log("[HealthDashboard] Supervision data not available:",r.message);case 8:t.n=10;break;case 9:t.p=9,o=t.v,console.error("[HealthDashboard] Failed to fetch health data:",o),e.error=o.message||"Unknown error occurred";case 10:return t.p=10,e.loading=!1,t.f(10);case 11:return t.a(2)}}),t,null,[[3,7],[1,9,10,11]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){kt(o,a,r,s,i,"next",t)}function i(t){kt(o,a,r,s,i,"throw",t)}s(void 0)}))})()},startAutoRefresh:function(){var t=this;this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=setInterval((function(){console.log("[HealthDashboard] Auto-refresh triggered"),t.refreshHealth()}),1e3*this.refreshInterval)},stopAutoRefresh:function(){this.autoRefreshTimer&&(clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=null)},openSettings:function(){console.log("[HealthDashboard] Opening settings dialog"),this.settingsForm.aiaiUrl=this.aiaiUrl,this.settingsForm.refreshInterval=this.refreshInterval,this.showSettings=!0},closeSettings:function(){this.showSettings=!1},saveSettings:function(){if(console.log("[HealthDashboard] Saving settings:",this.settingsForm),this.aiaiUrl=this.settingsForm.aiaiUrl,this.refreshInterval=this.settingsForm.refreshInterval,"undefined"!=typeof widget&&widget.setValue)try{widget.setValue("aiaiUrl",this.aiaiUrl),widget.setValue("refreshInterval",String(this.refreshInterval)),console.log("[HealthDashboard] Settings saved to widget preferences")}catch(t){console.warn("[HealthDashboard] Could not save to widget preferences:",t)}this.stopAutoRefresh(),this.startAutoRefresh(),this.refreshHealth(),this.showSettings=!1}}},Ot=n(456),Tt=n.n(Ot),Dt={insert:"head",singleton:!1},It=(D()(Tt.a,Dt),Tt.a.locals,n(498)),jt=n(373),Pt=n(503),Vt=n(500),Ut=n(375),Et=Object(V.a)(At,o,[],!1,null,"4ae0ad98",null);E()(Et,{VAlert:dt.a,VApp:It.a,VBtn:R.a,VCard:F.a,VCardActions:N.a,VCardSubtitle:N.b,VCardText:N.c,VCardTitle:N.d,VChip:jt.a,VCol:M.a,VContainer:Pt.a,VDialog:Vt.a,VIcon:G.a,VProgressCircular:bt.a,VRow:Q.a,VSpacer:q.a,VTextField:Ut.a}),Et.options.__file="src/components/HealthDashboard.vue";var Rt=Et.exports,Ft=n(473);n(463);r.a.use(Ft.a);var Nt=new Ft.a({icons:{iconfont:"mdi"}}),Mt=n(471);r.a.use(Mt.a);var Ht=new Mt.a.Store({state:{},mutations:{},actions:{},getters:{}});function Gt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var l=a&&a.prototype instanceof i?a:i,c=Object.create(l.prototype);return Qt(c,"_invoke",function(n,a,r){var o,i,l,c=0,u=r||[],d=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,i=0,l=t,v.n=n,s}};function p(n,a){for(i=n,l=a,e=0;!d&&c&&!r&&e<u.length;e++){var r,o=u[e],p=v.p,f=o[2];n>3?(r=f===a)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=p&&((r=n<2&&p<o[1])?(i=0,v.v=a,v.n=o[1]):p<f&&(r=n<3||o[0]>a||a>f)&&(o[4]=n,o[5]=a,v.n=f,i=0))}if(r||n>1)return s;throw d=!0,a}return function(r,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),i=u,l=f;(e=i<2?t:l)||!d;){o||(i?i<3?(i>1&&(v.n=-1),p(i,l)):v.n=l:v.v=l);try{if(c=2,o){if(i||(r="next"),e=o[r]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=t}else if((e=(d=v.n<0)?l:n.call(a,v))!==s)break}catch(e){o=t,i=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,r,o),!0),c}var s={};function i(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][a]?e(e([][a]())):(Qt(e={},a,(function(){return this})),e),d=c.prototype=i.prototype=Object.create(u);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Qt(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,Qt(d,"constructor",c),Qt(c,"constructor",l),l.displayName="GeneratorFunction",Qt(c,r,"GeneratorFunction"),Qt(d),Qt(d,r,"Generator"),Qt(d,a,(function(){return this})),Qt(d,"toString",(function(){return"[object Generator]"})),(Gt=function(){return{w:o,m:v}})()}function Qt(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(Qt=function(t,e,n,a){function o(e,n){Qt(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function qt(t,e,n,a,r,o,s){try{var i=t[o](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(a,r)}function Jt(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){qt(o,a,r,s,i,"next",t)}function i(t){qt(o,a,r,s,i,"throw",t)}s(void 0)}))}}function zt(){return(zt=Jt(Gt().m((function t(){return Gt().w((function(t){for(;;)switch(t.n){case 0:return a.b.disableCSS(!0),window.title="AI Assistant Health Dashboard",widget.setTitle(window.title),console.log("[Main] Initializing Health Dashboard widget"),t.n=1,m();case 1:new r.a({store:Ht,vuetify:Nt,render:function(t){return t(Rt)}}).$mount("app"),console.log("[Main] Health Dashboard mounted successfully"),requirejs(["DS/PlatformAPI/PlatformAPI"],(function(t){console.log("[Main] PlatformAPI loaded")}));case 2:return t.a(2)}}),t)})))).apply(this,arguments)}e.default=function(){widget.addEvent("onLoad",(function(){!function(){zt.apply(this,arguments)}()})),widget.addEvent("onRefresh",(function(){}))}},381:function(t,e,n){(e=n(317)(!1)).push([t.i,"\n.status-bar[data-v-4e428641] {\n  border-left: 4px solid transparent;\n  transition: border-color 0.3s ease;\n}\n.status-bar.healthy[data-v-4e428641] {\n  border-left-color: #4caf50;\n}\n.status-bar.degraded[data-v-4e428641] {\n  border-left-color: #ff9800;\n}\n.status-bar.unhealthy[data-v-4e428641] {\n  border-left-color: #f44336;\n}\n.status-item[data-v-4e428641] {\n  display: inline-flex;\n  align-items: center;\n  font-size: 14px;\n}\n.status-label[data-v-4e428641] {\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.6);\n  margin-right: 4px;\n}\n.status-text[data-v-4e428641] {\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.87);\n}\n.refresh-btn[data-v-4e428641] {\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n.refresh-btn[data-v-4e428641]:hover {\n  opacity: 1;\n}\n\n/* Responsive adjustments */\n@media (max-width: 960px) {\n.status-item[data-v-4e428641] {\n    font-size: 12px;\n}\n}\n",""]),t.exports=e},407:function(t,e,n){(e=n(317)(!1)).push([t.i,"\n.v-data-table td[data-v-46354183] {\n  padding: 8px 16px !important;\n}\n",""]),t.exports=e},410:function(t,e,n){(e=n(317)(!1)).push([t.i,"\n.structure-tree[data-v-7db409ba] {\n  font-family: monospace;\n  font-size: 14px;\n}\n.tree-node[data-v-7db409ba] {\n  margin-bottom: 4px;\n}\n.node-header[data-v-7db409ba] {\n  display: flex;\n  align-items: center;\n  padding: 4px 0;\n}\n.node-icon[data-v-7db409ba] {\n  font-size: 16px;\n  line-height: 1;\n}\n.node-name[data-v-7db409ba] {\n  margin-left: 8px;\n  font-weight: 500;\n  font-size: 14px;\n}\n.node-quantity[data-v-7db409ba] {\n  margin-left: 8px;\n  padding: 2px 8px;\n  background-color: #e3f2fd;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n  color: #1976d2;\n}\n.node-children[data-v-7db409ba] {\n  margin-top: 4px;\n}\n.json-view[data-v-7db409ba] {\n  background-color: #f5f5f5;\n  padding: 16px;\n  border-radius: 4px;\n  overflow-x: auto;\n  font-family: 'Courier New', monospace;\n  font-size: 13px;\n  line-height: 1.5;\n}\n.gap-2[data-v-7db409ba] {\n  gap: 8px;\n}\n",""]),t.exports=e},456:function(t,e,n){(e=n(317)(!1)).push([t.i,"\n.v-application[data-v-4ae0ad98] {\n  background-color: #f5f5f5;\n}\n.v-card[data-v-4ae0ad98] {\n  transition: all 0.3s ease;\n}\n.v-card[data-v-4ae0ad98]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n}\n",""]),t.exports=e}}]);